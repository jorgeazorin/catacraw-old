"use strict";
module.exports = function (logger) {
    logger('Scraping free-proxy-list.net ...');

    const request = require('request');
    const cheerio = require('cheerio');
    const Q = require('q');

    let defer = Q.defer();
    let proxies = [];

    request.get('http://www.free-proxy-list.net', function (err, res) {
        let $ = cheerio.load(res.body);
        $("#proxylisttable > tbody").find('tr').each(function () {
            let ip = $(this).find('td').first().text();
            let port = $(this).find('td').first().next().text();
            proxies.push(`${ip}:${port}`);
        });

        defer.resolve(proxies);
    });


    return defer.promise;
};
